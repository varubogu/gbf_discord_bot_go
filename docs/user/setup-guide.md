# セットアップガイド

GBF Discord Bot をDiscordサーバーに導入する手順について説明します。

## 📋 目次

- [事前準備](#事前準備)
- [Bot の招待](#bot-の招待)
- [権限設定](#権限設定)
- [初期設定](#初期設定)
- [動作確認](#動作確認)
- [トラブルシューティング](#トラブルシューティング)

## 🔧 事前準備

### 必要な権限
セットアップを行うには以下の権限が必要です：
- **サーバー管理権限** - Botの招待と権限設定
- **チャンネル管理権限** - 通知チャンネルの設定

### 推奨環境
- Discord サーバー（Guild）
- 募集用チャンネル（推奨: `#マルチ募集` など）
- 通知用チャンネル（推奨: `#bot-通知` など）

## 🤖 Bot の招待

### Step 1: 招待リンクの取得
管理者から以下の情報を取得してください：
- Bot 招待URL
- またはBot のClient ID

### Step 2: Bot をサーバーに招待

1. **招待URLにアクセス**
   - 管理者から提供された招待URLをクリック
   
2. **サーバーの選択**
   - ドロップダウンからBotを招待したいサーバーを選択
   
3. **権限の確認**
   - 必要な権限にチェックが入っていることを確認：
     ```
     ✅ メッセージを送信
     ✅ 埋め込みリンク
     ✅ ファイルを添付
     ✅ メッセージ履歴を読む
     ✅ リアクションの追加
     ✅ スラッシュコマンドを使う
     ```

4. **招待を完了**
   - 「認証」ボタンをクリックして招待を完了

### Step 3: Bot の確認
サーバーのメンバー一覧にBotが表示されていることを確認してください。

## 🔒 権限設定

### Bot用ロールの作成（推奨）

1. **サーバー設定 → ロール** を開く
2. **新しいロール** を作成
3. ロール名を設定（例: `GBF Bot`）
4. 必要な権限を付与：
   ```
   一般的な権限:
   ✅ メッセージを送信
   ✅ 埋め込みリンク
   ✅ ファイルを添付
   ✅ メッセージ履歴を読む
   ✅ メンション権限(@everyone, @here, 全ロール)
   ✅ リアクションを追加
   ✅ 外部の絵文字を使用する
   ✅ スラッシュコマンドを使う
   ```

5. **GBF Bot** にロールを割り当て

### 管理者用ロールの作成

Bot管理コマンドを使用するためのロールを作成します：

1. **新しいロール** を作成: `gbf_bot_control`
2. 権限は基本設定のまま（特別な権限は不要）
3. 信頼できる管理者にこのロールを付与

### チャンネル権限の設定

各チャンネルでBotが適切に動作するよう権限を設定：

#### 募集チャンネル
```
GBF Bot の権限:
✅ チャンネルを見る
✅ メッセージを送信
✅ 埋め込みリンク
✅ リアクションを追加
✅ メッセージ履歴を読む
```

#### 通知チャンネル
```
GBF Bot の権限:
✅ チャンネルを見る
✅ メッセージを送信
✅ 埋め込みリンク
✅ メンションを送信
```

## ⚙️ 初期設定

### Step 1: 動作確認
まずBotが正常に動作することを確認します：

```
/ping
```

または

```
!ping
```

「Pong!」と応答が返ってくれば正常です。

### Step 2: ヘルプの確認
利用可能なコマンドを確認：

```
/help
```

### Step 3: バトル情報の確認
バトル募集機能をテスト：

```
/battles
```

利用可能なバトル一覧が表示されます。

### Step 4: 管理コマンドの確認（管理者のみ）
`gbf_bot_control` ロールを持つユーザーで実行：

```
/status
```

Botの状態情報が表示されます。

## 📝 チャンネル推奨設定

### マルチ募集チャンネル
- **チャンネル名**: `#マルチ募集` または `#multi-recruitment`
- **説明**: マルチバトル募集専用チャンネル
- **権限**: 一般ユーザーがメッセージ送信・Bot使用可能

### 通知チャンネル
- **チャンネル名**: `#bot-通知` または `#announcements`
- **説明**: イベント通知・スケジュール通知用
- **権限**: Bot のみメッセージ送信可能（推奨）

### 管理チャンネル（オプション）
- **チャンネル名**: `#bot-管理` または `#bot-admin`
- **説明**: Bot管理コマンド実行用
- **権限**: 管理者・`gbf_bot_control` ロールのみアクセス可能

## ✅ 動作確認

### 基本動作のテスト

1. **ping テスト**
   ```
   /ping
   ```
   ✅ 「Pong!」応答

2. **ヘルプ表示**
   ```
   /help
   ```
   ✅ コマンド一覧表示

3. **バトル一覧**
   ```
   /battles
   ```
   ✅ 利用可能バトル表示

4. **バトル詳細**
   ```
   /battle faa_hl
   ```
   ✅ 詳細情報表示

### 募集機能のテスト（オプション）

**注意**: 実際の募集は他のユーザーに影響するため、テスト用チャンネルで実行してください。

```
/recruit ルシファー テスト募集
```
✅ 募集投稿とリアクション追加

## ❗ トラブルシューティング

### Bot が応答しない場合

1. **Bot がオンラインか確認**
   - メンバー一覧でBotのステータスを確認
   - オフラインの場合は管理者に連絡

2. **権限を確認**
   - Botに必要な権限が付与されているか確認
   - 特に「スラッシュコマンドを使う」権限

3. **チャンネル権限を確認**
   - Botがそのチャンネルを見れるか確認
   - メッセージ送信権限があるか確認

### スラッシュコマンドが表示されない場合

1. **Discord クライアントを再起動**
2. **サーバーから一度退出して再参加**
3. **時間をおいて再試行**（最大1時間程度）

### コマンドが「権限がありません」エラーになる場合

1. **管理コマンド**
   - `gbf_bot_control` ロールまたは管理者権限が必要
2. **一般コマンド**
   - 通常は権限不要。Bot の設定を確認

### エラーが継続する場合

1. **ログの確認**
   ```
   /status
   ```
2. **管理者への報告**
   - エラーメッセージのスクリーンショット
   - 実行したコマンド
   - 発生時刻

## 📞 サポート

問題が解決しない場合：

1. [FAQ](faq.md) を確認
2. [利用者マニュアル](user-manual.md) で正しい使用方法を確認
3. サーバー管理者またはBot管理者に連絡

---

**関連ドキュメント:**
- [利用者マニュアル](user-manual.md) - 基本的な使用方法
- [管理者ガイド](admin-guide.md) - 詳細な管理設定
- [FAQ](faq.md) - よくある質問

**更新履歴:**
- 2025-08-18: 初版作成（Go版移植完了版）