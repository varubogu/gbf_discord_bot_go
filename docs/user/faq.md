# FAQ・トラブルシューティング

GBF Discord Bot に関するよくある質問と問題の解決方法について説明します。

## 📋 目次

- [一般的な質問](#一般的な質問)
- [コマンド関連](#コマンド関連)
- [バトル募集関連](#バトル募集関連)
- [権限・設定関連](#権限設定関連)
- [エラーメッセージ](#エラーメッセージ)
- [パフォーマンス・障害](#パフォーマンス障害)

## ❓ 一般的な質問

### Q: このBotは何ができますか？
**A:** 主に以下の機能があります：
- マルチバトル募集（ルシファーHL、アルバハ、ベルゼバブ等）
- 古戦場・イベントスケジュール通知
- バトル情報表示
- サーバー管理機能

詳細は [利用者マニュアル](user-manual.md) をご覧ください。

### Q: Python版とGo版の違いは何ですか？
**A:** 主な違い：
- **パフォーマンス向上**: より高速な応答
- **メモリ使用量削減**: 軽量化
- **安定性向上**: クラッシュ耐性の改善
- **機能**: 基本的にPython版と同等

### Q: Bot は無料で使用できますか？
**A:** はい、無料で使用できます。ただし、サーバー管理者による導入・設定が必要です。

### Q: 個人のDMでBotを使用できますか？
**A:** 一部のコマンド（`/ping`, `/help`等）は使用可能ですが、バトル募集機能はサーバー（Guild）内でのみ動作します。

## 🎮 コマンド関連

### Q: スラッシュコマンドが表示されない
**A:** 以下を試してください：
1. **Discord クライアントを再起動**
2. **サーバーから一度退出して再参加**
3. **しばらく待つ**（最大1時間）
4. **Web版Discordで試す**

### Q: 「権限がありません」エラーが出る
**A:** コマンドによって必要な権限が異なります：

| コマンド | 必要権限 |
|----------|----------|
| `/ping`, `/help`, `/battles` | なし |
| `/recruit` | なし |
| `/reload`, `/status` | `gbf_bot_control` ロールまたは管理者権限 |

### Q: プレフィックスコマンド（!ping等）が反応しない
**A:** 以下を確認してください：
1. **Message Content Intent** が有効か
2. **Botがそのチャンネルを見れるか**
3. **メッセージ送信権限があるか**

### Q: コマンドの入力補完が働かない
**A:** 
- オートコンプリートはスラッシュコマンドでのみ動作します
- プレフィックスコマンド（!）では利用できません

## ⚔️ バトル募集関連

### Q: 募集を作成できない
**A:** 以下を確認してください：
1. **正しいクエスト名を使用しているか**
   ```
   正: /recruit ルシファー
   正: /recruit faa
   誤: /recruit ルシfer（タイポ）
   ```
2. **1人1つまでの制限**を超えていないか
3. **Botに埋め込みリンク権限があるか**

### Q: 募集に参加できない
**A:** 以下の原因が考えられます：
- 募集が既に満員
- 募集が期限切れ（24時間経過）
- 既に参加済み
- 募集がキャンセル済み

### Q: リアクションが機能しない
**A:** 
1. **Botにリアクション追加権限があるか確認**
2. **他のユーザーもリアクションできるか確認**
3. **一度リアクションを外して再度追加**

### Q: 募集メッセージが表示されない
**A:** 
1. **Botに埋め込みリンク権限があるか確認**
2. **チャンネル権限を確認**
3. **Bot が一時的にオフラインでないか確認**

### Q: 時間指定が正しく認識されない
**A:** 以下の形式で指定してください：
```
✅ 正しい例:
/recruit ルシファー 20:30
/recruit ウバハ 明日 14:00
/recruit ベルゼバブ 8/25 19:00

❌ 間違った例:
/recruit ルシファー 8時半
/recruit ウバハ あした2時
/recruit ベルゼバブ 来週
```

## 🔒 権限・設定関連

### Q: 「gbf_bot_control」ロールとは？
**A:** Bot管理コマンドを使用するための特別なロールです：
- サーバー管理者が作成・付与
- `/reload`, `/status` 等の管理コマンドに必要
- 信頼できるメンバーにのみ付与推奨

### Q: Bot がメッセージを送信できない
**A:** 以下の権限を確認：
1. **チャンネルを見る** 権限
2. **メッセージを送信** 権限
3. **埋め込みリンク** 権限（募集機能に必要）

### Q: Bot の権限設定方法は？
**A:** [セットアップガイド](setup-guide.md) の「権限設定」セクションをご覧ください。

### Q: 通知チャンネルを変更したい
**A:** 現在は管理者によるBot設定変更が必要です。サーバー管理者に相談してください。

## ⚠️ エラーメッセージ

### 「コマンドの処理に失敗しました」
**原因と対処法:**
1. **一時的なネットワークエラー** → 少し待って再実行
2. **Bot の一時的な不具合** → `/status` で状態確認
3. **権限不足** → 必要な権限を確認

### 「このコマンドは現在利用できません」
**原因と対処法:**
1. **Botのメンテナンス中** → 管理者からの案内を待つ
2. **機能が一時停止** → `/status` で詳細確認

### 「タイムアウトしました」
**原因と対処法:**
1. **Discord の応答制限（3秒）** → 自動で再試行される
2. **ネットワークの問題** → しばらく待って再実行

### 「データベースエラー」
**原因と対処法:**
1. **一時的なデータベース接続問題** → 少し待って再実行
2. **継続する場合** → 管理者に報告

## 🚨 パフォーマンス・障害

### Q: Bot の応答が遅い
**A:** 以下を確認：
1. **Discordの全体的な障害** → [Discord Status](https://discordstatus.com/) を確認
2. **Bot サーバーの負荷** → `/status` で状態確認
3. **多数の同時リクエスト** → 少し待って再実行

### Q: Bot がオフラインになった
**A:** 
1. **予定メンテナンス** → 管理者からの事前案内を確認
2. **緊急メンテナンス** → 復旧を待つ
3. **継続する場合** → 管理者に報告

### Q: 一部機能だけ動かない
**A:** 
1. **段階的復旧中** → `/status` で状況確認
2. **特定機能の問題** → 管理者に報告
3. **権限変更** → Bot の権限設定を再確認

## 📞 問題解決の手順

### ステップ 1: 基本確認
1. **Bot がオンライン** か確認
2. **同じ問題が他のユーザーでも発生** するか確認
3. **最近の設定変更** がないか確認

### ステップ 2: 状態確認
```
/status
```
Bot の現在状態をチェック

### ステップ 3: 権限確認
- チャンネル権限
- ロール権限
- Bot 権限

### ステップ 4: 再試行
- Discord クライアント再起動
- 少し時間をおいて再実行
- 別のチャンネルで試行

### ステップ 5: 報告
継続する問題は以下の情報と共に管理者に報告：
- **エラーメッセージ** のスクリーンショット
- **実行したコマンド**
- **発生時刻**
- **影響範囲**（個人のみ/サーバー全体）

## 🔗 関連リンク

**内部ドキュメント:**
- [利用者マニュアル](user-manual.md) - 基本的な使用方法
- [セットアップガイド](setup-guide.md) - 導入・設定方法
- [管理者ガイド](admin-guide.md) - 管理者向け情報

**外部リンク:**
- [Discord Status](https://discordstatus.com/) - Discord サービス状況
- [Discord Developer Portal](https://discord.com/developers/applications) - Bot 管理
- [プロジェクト GitHub](https://github.com/varubogu/gbf_discord_bot_go) - 最新情報

---

**更新履歴:**
- 2025-08-18: 初版作成（Go版移植完了版）

**Note:** このFAQで解決しない問題については、サーバー管理者またはBot開発者にお問い合わせください。